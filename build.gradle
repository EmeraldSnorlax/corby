plugins {
    id 'java'
    id 'application'
}

sourceCompatibility = 1.8

apply plugin : 'java'

ext {
    javaMainClass = 'xyz.d1snin.corby.Corby'
}

application {
    mainClassName = javaMainClass
}

group 'xyz.d1snin.corby'
version 'v1.1'

repositories {
    mavenCentral()
    jcenter()
    maven { url "https://jitpack.io" }
}

dependencies {
    compile 'org.slf4j:slf4j-simple:1.7.30'
    compile 'net.dv8tion:JDA:4.2.0_247'
    compile 'com.googlecode.json-simple:json-simple:1.1.1'
    compile 'org.mongodb:mongo-java-driver:2.11.2'
    compile 'com.github.bottom-software-foundation:bottom-java:v2.1.0'
    compile 'com.fasterxml.jackson.core:jackson-databind:2.12.3'
}
sourceSets {
    main.java.srcDir "src/main/java"
}

jar {
    manifest {
        attributes "Main-Class": "$mainClassName"
    }

    from {
        configurations
                .compile
                .findAll { !it.name.endsWith('pom') }
                .collect { it.isDirectory() ? it : zipTree(it) }
    }
}
